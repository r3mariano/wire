apply plugin: 'java-library'
apply plugin: 'org.jetbrains.kotlin.jvm'

jar {
    manifest {
        attributes('Automatic-Module-Name': 'wire-grpc-server')
    }
}

dependencies {
    api project(':wire-schema')
    implementation project(':wire-runtime')
    implementation project(':wire-grpc-client')
    implementation deps.okio.jvm
    implementation deps.grpc.stub
    api deps.kotlinpoet
    // TODO this should use a JRE version without forcing one.
    api ("com.google.guava:guava:30.0-jre")
    testImplementation project(':wire-test-utils')
    testImplementation deps.kotlin.test.junit
    testImplementation deps.truth
    testImplementation deps.assertj
}

sourceSets {
    test.java.srcDirs += 'src/test/proto'
}