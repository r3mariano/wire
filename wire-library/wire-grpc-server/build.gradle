apply plugin: 'java-library'
apply plugin: 'org.jetbrains.kotlin.jvm'

jar {
    manifest {
        attributes('Automatic-Module-Name': 'wire-grpc-server')
    }
}

dependencies {
    implementation project(':wire-runtime')
    // io.grpc.stub relies on guava-android. This module relies on a -jre version of guava.
    implementation(deps.grpc.stub) {
        exclude(group: 'com.google.guava', module: 'guava')
    }
    implementation ("com.google.guava:guava:21.0")
    testImplementation project(':wire-test-utils')
    testImplementation deps.kotlin.test.junit
    testImplementation deps.truth
    testImplementation deps.assertj
}

sourceSets {
    test.java.srcDirs += 'src/test/proto'
}