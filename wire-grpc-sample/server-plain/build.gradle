apply plugin: 'org.jetbrains.kotlin.jvm'
apply plugin: 'com.squareup.wire'
apply plugin: 'application'

mainClassName = "com.squareup.wire.whiteboard.MiskGrpcServerKt"

sourceCompatibility = JavaVersion.VERSION_11
targetCompatibility = JavaVersion.VERSION_11

wire {
  sourcePath {
    srcDir "$rootDir/wire-grpc-sample/protos/src/main/proto"
  }
  kotlin {
    rpcCallStyle = 'blocking'
    rpcRole = 'server'
    singleMethodServices = true
    grpcServerCompatible = true
  }
}

dependencies {
  implementation project(path: ':wire-grpc-sample:protos', configuration: 'default')
  implementation deps.wire.grpcServer
  implementation deps.wire.runtime
  implementation deps.grpc.netty
  implementation deps.grpc.stub
}
